<form id="{{nameForm}}" method="post">
    <div class="form-field">
        {% for input in inputs %}
        <div class="field-{{input.field}}">
            {% if input.type == 'textarea' %}
            <textarea
                id="{{ input.id }}"
                name="{{ input.name }}"
                class="form-field-{{input.field}}"
            ></textarea>
            {% else %}
            <input
                type="{{ input.type }}"
                id="{{ input.id }}"
                name="{{ input.name }}"
                class="form-field-{{input.field}}"
            />
            {% endif %}
        </div>
        {% endfor %}
        <input type="submit" value="send" />
    </div>
</form>
<div id="form-message">{{ message }}</div>

<script>
    document
        .getElementById("{{ nameForm }}")
        .addEventListener("submit", function (event) {
            event.preventDefault();

            var formData = new FormData(this);

            fetch("{{ action }}", {
                method: "POST",
                body: formData,
            })
                .then((response) => response.text())
                .then((data) => {
                    document.getElementById("form-message").innerText = data;
                })
                .catch((error) => {
                    console.error("Error:", error);
                });
        });
</script>
